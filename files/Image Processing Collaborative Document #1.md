![](https://i.imgur.com/iywjz8s.png)


# Image Processing Collaborative Document #1

11-03-2024 to 14-03-2024 Image Processing.

Welcome to The Workshop Collaborative Document #1 11-03-2024.

This Document is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents.

----------------------------------------------------------------------------

This is the Document for today: [tinyurl.com/2024-03-dc-image-processing-1](https://tinyurl.com/2024-03-dc-image-processing-1)

Collaborative Document day 1: [tinyurl.com/2024-03-dc-image-processing-1](https://tinyurl.com/2024-03-dc-image-processing-1)

Collaborative Document day 2: [link](https://tinyurl.com/2024-03-dc-image-processing-2)

Collaborative Document day 3: [link](<https://codimd.carpentries.org/s/QV6dtCxX1#>)

Collaborative Document day 4: [link](<https://codimd.carpentries.org/s/QzhGE3HTu>)

## 👮Code of Conduct

Participants are expected to follow these guidelines:
* Use welcoming and inclusive language.
* Be respectful of different viewpoints and experiences.
* Gracefully accept constructive criticism.
* Focus on what is best for the community.
* Show courtesy and respect towards other community members.
 
## ⚖️ License

All content is publicly available under the Creative Commons Attribution License: [creativecommons.org/licenses/by/4.0/](https://creativecommons.org/licenses/by/4.0/).

## 🙋Getting help

To ask a question, just raise your hand.

If you need help from a helper, raise your virtual hand in Zoom. A helper will come to assist you as soon as possible, maybe in a private chat, but you can also ask for a breakout room.

## 🖥 Workshop websites

[where you bought tickets](<https://esciencecenter-digital-skills.github.io/2024-03-11-dc-image-processing/>)


[data carpentry website](<https://datacarpentry.org/image-processing/>)

🛠 Setup

[link](<https://github.com/esciencecenter-digital-skills/image-processing/blob/main/setup.md>)

Download files: Data files can be obtained through the repository
[data](<https://github.com/esciencecenter-digital-skills/image-processing/>)

## 👩‍🏫👩‍💻🎓 Instructors

Giulia Crocioni, Jaro Camphuijsen, Candace Makeda Moore

## 👲🏾🙋 Helpers

Thijs Vroegh

## 👩‍💻👩‍💼👨‍🔬🧑‍🔬👲🏾🚀🧙‍♂️🔧 Roll Call
Name/ Pronouns/ Organizations


| name                 | pronouns | orgs                                   |
| -------------------- |:-------- | -------------------------------------- |
| Stripped Data| Stripped Data |Stripped Data     |


## :vertical_traffic_light:⛽ :fuelpump: :traffic_light:

Setup stop.

## 💻❄️ :snowflake: 	⛄ :snowman:🔬❄️ :snowflake: ⛄ :snowman::blue_heart:🔧 Ice Breaker
Name/ An awesome museum you went to or want to see / why 

|               Name | Museum           | Why                                               |
| ------------------:|:---------------- | ------------------------------------------------- |
|Stripped Data| Stripped Data   | Stripped Data  |
                                                  
 ### 💻👩‍💼🔬👨‍🔬🧑‍🔬🚀🔧 Extra questions 1 and 2
Name/ Type of Images you work on/ Types of interest
|      Name | Images                                | Interest                                             |
| ---------:|:------------------------------------- | ---------------------------------------------------- |
|   Stripped Data| Stripped Data | Stripped Data |



## 🗓️ Agenda
| Times Day One | Topic                                           |
| -------------:|:-------------------------- |
|          9:00 | Welcome and Intro    |
|          9:20 | Image Basics  |
|          10:10| Working with Skimage | 
|         10:30| Coffee            |
|    10:40 | Drawing    |              
|         11:40 | Bitwise operations    |
|         12:30 |    Summary and Wrap-up  |
|         12:40| Urgent feedback collection and updates |
|     12:50     | Optional extra tutoring    |
|         13:00 | END              |



| Times Day Two | Topic                            |
| -------------:|:-------------------------------- |
|          9:00 | Welcome back + Questions|
|          9:10 | Drawing + bitwise            |
|         10:00 |   finishing Histograms  |
|         10:15 |    Summary lecture day 1+ |
|         11:00 |    coffee break        |
|         11:15 | Blurring     |
|         12:00 | Thresholding I|
|         12:45 |  Wrap up with feedback collection  |
|          12:55     | Urgent issues                    |
|        13:00       |    END day 2                |




| Times Day Three | Topic                         |
| ---------------:|:----------------------------- |
|     9:00 | Welcome and Intro      |
|     9:25 | Thresholding Images II  |
|    10:30 | Coffee break                         |
|    10:45 | Thresh Images III cont.   |
|    11:15 | Connected components analysis |       |   12:45  |  Wrap up with feedback collection    |
|   12:55  | Urgent issues/feedback collecton     |
|     13:00| END                                |



|  Times Day Four | Topic                        |
| -------:|:----------------------------- |
|  9:00 | Welcome back |
| 9:30 | Optional Challenge                        |
| 10:30 | Coffee break                          |
| 10:45 | Optional Challenge continued                        |
| 11:30 |  Bonus lecture: transformations, affine |
| 12:30 | Final feedback collection and notices           |
| 13:00 | End course                       |
 

## 🎓🏢 Evaluation logistics
* At the end of the day you should write evaluations into the colaborative document.


## 🏢 Location logistics
* This version is online! We are using Zoom. If you have trouble with Zoom please contact us at training@esciencecenter.nl

## 🎓 Certificate of attendance
If you attend the full workshop you can request a certificate of attendance by emailing to training@esciencecenter.nl .


## 🎓🔧Evaluations

 
-Evaluator name (optional)| Evaluation
 -
 - Your alias | Your comments
 - Maybe include some instructions on how to install VS Code or another IDE, for people who don't know
 
 -
 -
 -
 -
 -
 -
 

## 🔧 Exercises

Your answers: 

## Image basics


### Exercise #1:
Exercise 1 : (summary) read in image (“data/eight.tif”) then change it (change 8 image into a 5), then show the changed image


Recommended anwsers:
<stripped data>

### Exercise #2:
Suppose that we represent colours as triples (r, g, b), where each of r, g, and b is an integer in [0, 255]. What colours are represented by each of these triples? (Try to answer these questions without reading further.)

(255, 0, 0)
(0, 255, 0)
(0, 0, 255)
(255, 255, 255)
(0, 0, 0)
(128, 128, 128)




## Working with Skimage

### Exercise #1:
Exercise 1: 
* resize chair image (“data/chair.jpg”) to 10% of original. 
* Next, write the resized image out to a new file named resized.jpg in your data directory. 
* Finally, use plt.imshow() with each of your image variables to display both images in your notebook. 
Don’t forget to use fig, ax = plt.subplots() so you don’t overwrite the first image with the second. Images may appear the same size in jupyter, but you can see the size difference by comparing the scales for each.



## solution:
<stripped data>
    
### Exercise #2
Remake sodoku image (data/sudoku.png) to be grayer. Your task is to load the image in grayscale format and turn all of the bright pixels in the image to a light gray colour. In other words, mask the bright pixels that have a pixel value greater than, say, 192 and set their value to 192 (the value 192 is chosen here because it corresponds to 75% of the range 0-255 of an 8-bit pixel).

```
plt.imshow?
```




## solution:
<stripped data>
    
## Histograms
### Exercise #1a (Advanced)
Using a mask for a histogram (15 min)
Exercise 1: Looking at the histogram above, you will notice that there is a large number of very dark pixels, as indicated in the chart by the spike around the grayscale value 0.12. That is not so surprising, since the original image is mostly black background. What if we want to focus more closely on the leaf of the seedling? That is where a mask enters the picture!

First, hover over the plant seedling image with your mouse to determine the (x, y) coordinates of a bounding box around the leaf of the seedling. Then, using techniques from the Drawing and Bitwise Operations episode, create a mask with a white rectangle covering that bounding box.

After you have created the mask, apply it to the input image before passing it to the np.histogram function.

### Exercise #1b
Create a new, smaller image focused on the object from the original image, and create a new histogram for this new image 


## solution:
<stripped data>
## 🧠 Collaborative Notes

### Episode 2
    
First, let us add the necessary imports:

```python
"""Python libraries for learning and performing image processing."""

import ipympl
import matplotlib.pyplot as plt
import numpy as np
import skimage as ski
```

Now that we have our libraries loaded, we will run a Jupyter Magic Command that will ensure our images display in our Jupyter document with pixel information that will help us more efficiently run commands later in the session.

```python
%matplotlib widget
```

With that taken care of, let us display the image we have loaded, using the imshow function from the `matplotlib.pyplot` module.

```python
plt.imshow(eight)
```

You might be thinking, “That does look vaguely like an eight, and I see two colours but how can that be only 15 pixels”. The display of the eight you see does use a lot more screen pixels to display our eight so large, but that does not mean there is information for all those screen pixels in the file. All those extra pixels are a consequence of our viewer creating additional pixels through interpolation. It could have just displayed it as a tiny image using only 15 screen pixels if the viewer was designed differently.

While many image file formats contain descriptive metadata that can be essential, the bulk of a picture file is just arrays of numeric information that, when interpreted according to a certain rule set, become recognizable as an image to us. Our image of an eight is no exception, and imageio.v3 stored that image data in an array of arrays making a 5 x 3 matrix of 15 pixels. We can demonstrate that by calling on the shape property of our image variable and see the matrix by printing our image variable to the screen.

```python
print(eight.shape)
print(eight)
```

Thus if we have tools that will allow us to manipulate these arrays of numbers, we can manipulate the image. The NumPy library can be particularly useful here, so let’s try that out using NumPy array slicing. Notice that the default behavior of the imshow function appended row and column numbers that will be helpful to us as we try to address individual or groups of pixels. First let’s load another copy of our eight, and then make it look like a zero.

To make it look like a zero, we need to change the number underlying the centremost pixel to be 1. With the help of those row and column headers, at this small scale we can determine the centre pixel is in row labeled 2 and column labeled 1. Using array slicing, we can then address and assign a new value to that position.

```python
zero = iio.imread(uri="data/eight.tif")
zero[2,1]= 1.0

# The following line of code creates a new figure for imshow to use in displaying our output.
# Without it, plt.imshow() would overwrite our previous image in the cell above
fig, ax = plt.subplots()
plt.imshow(zero)
print(zero)
```

```python
# make a copy of eight
three_colours = iio.imread(uri="data/eight.tif")

# multiply the whole matrix by 128
three_colours = three_colours * 128

# set the middle row (index 2) to the value of 255.,
# so you end up with the values 0., 128., and 255.
three_colours[2,:] = 255.
fig, ax = plt.subplots()
plt.imshow(three_colours)
print(three_colours)

# set the random seed so we all get the same matrix
pseudorandomizer = np.random.RandomState(2024)
# create a 4 × 4 checkerboard of random colours
checkerboard = pseudorandomizer.randint(0, 255, size=(4, 4, 3))
fig, ax = plt.subplots()
plt.imshow(checkerboard)
print(checkerboard)

# red
red_channel = checkerboard * [1, 0, 0]
fig, ax = plt.subplots()
plt.imshow(red_channel)

# green
green_channel = checkerboard * [0, 1, 0]
fig, ax = plt.subplots()
plt.imshow(green_channel)

# blue
blue_channel = checkerboard * [0, 0, 1]
fig, ax = plt.subplots()
plt.imshow(blue_channel)

# read metadata
metadata = iio.immeta(uri="../../data/eight.tif")
# display the format-specific metadata
metadata
```
### Episode 3

```python
import imageio.v3 as iio
import ipympl
import matplotlib.pyplot as plt
import numpy as np
import skimage as ski

"""Python program to open, display, and save an image."""
# read image
chair = iio.imread(uri="data/chair.jpg")

fig, ax = plt.subplots()
plt.imshow(chair)

# save a new version in .tif format
iio.imwrite(uri="data/chair.tif", image=chair)
```

```python
# read input image
maize_roots = iio.imread(uri="data/maize-root-cluster.jpg")
maize_roots = np.array(maize_roots)

# display original image
fig, ax = plt.subplots()
plt.imshow(maize_roots)

# keep only high-intensity pixels
maize_roots[maize_roots < 128] = 0

# display modified image
fig, ax = plt.subplots()
plt.imshow(maize_roots)
```

```python
# read input image
chair = iio.imread(uri="data/chair.jpg")

# display original image
fig, ax = plt.subplots()
plt.imshow(chair)

# convert to grayscale and display
gray_chair = ski.color.rgb2gray(chair)
fig, ax = plt.subplots()
plt.imshow(gray_chair, cmap="gray")

chair.dtype
```

```python
# Access via slicing

# load and display original image
board = iio.imread(uri="../../data/board.jpg")
board = np.array(board)
fig, ax = plt.subplots()
plt.imshow(board)

# extract, display, and save sub-image
clipped_board = board[60:151, 135:481, :]
fig, ax = plt.subplots()
plt.imshow(clipped_board)
#iio.imwrite(uri="data/clipped_board.tif", image=clipped_board)

# replace clipped area with sampled color
color = board[330, 90]
board[60:151, 135:481] = color
fig, ax = plt.subplots()
plt.imshow(board)

```

### Histograms
```
import imageio.v3 as iio
import ipympl
import matplotlib.pyplot as plt
import numpy as np
import skimage as ski

%matplotlib widget

# read the image of a plant seedling as grayscale from the outset
plant_seedling = iio.imread(uri="../../data/plant-seedling.jpg", mode="L")

# convert the image to float dtype with a value range from 0 to 1
plant_seedling = ski.util.img_as_float(plant_seedling)

# display the image
fig, ax = plt.subplots()
plt.imshow(plant_seedling, cmap="gray")

# create the histogram
histogram, bin_edges = np.histogram(plant_seedling, bins=256, range=(0, 1))

bin_edges

# configure and draw the histogram figure
plt.figure()
plt.title("Grayscale Histogram")
plt.xlabel("grayscale value")
plt.ylabel("pixel count")
plt.xlim([0.0, 1.0])  # <- named arguments do not work here

plt.plot(bin_edges[0:-1], histogram)  # <- or here

```

## 🔧 Command log
## 📚 Resources

Resources will be added from the cheat sheet based on audience composition

Don't forget to include:
* %matplotlib widget when importing your libraries in order to correctly plot matplotlib images in your notebook


## 🧠📚 Final tips and tops

